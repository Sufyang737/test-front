{
  "name": "leads",
  "type": "base",
  "schema": [
    {
      "name": "name",
      "type": "text",
      "required": true
    },
    {
      "name": "phone_number",
      "type": "text",
      "required": true
    },
    {
      "name": "email",
      "type": "email",
      "required": false
    },
    {
      "name": "status",
      "type": "select",
      "required": true,
      "options": {
        "values": ["new", "contacted", "qualified", "proposal", "negotiation", "won", "lost"]
      }
    },
    {
      "name": "source",
      "type": "select",
      "required": true,
      "options": {
        "values": ["whatsapp", "website", "referral", "social_media", "other"]
      }
    },
    {
      "name": "client_id",
      "type": "text",
      "required": true
    },
    {
      "name": "notes",
      "type": "text",
      "required": false
    },
    {
      "name": "last_contact",
      "type": "date",
      "required": true
    }
  ],
  "listRule": "@request.auth.id != \"\" && (client_id = @request.auth.id || @request.auth.role = \"support\")",
  "viewRule": "@request.auth.id != \"\" && (client_id = @request.auth.id || @request.auth.role = \"support\")",
  "createRule": "@request.auth.id != \"\"",
  "updateRule": "@request.auth.id != \"\" && (client_id = @request.auth.id || @request.auth.role = \"support\")",
  "deleteRule": "@request.auth.id != \"\" && @request.auth.role = \"support\""
} 